<script src="../../importmap.js"></script>

<style>
	html,
	body {
		margin: 0;
		padding: 0;
		height: 100%;
		width: 100%;
	}
	lume-scene {
		background: black;
		touch-action: none;
	}
	lume-element3d {
		border-radius: 100%;
		color: white;
		font-family: sans-serif;
		font-weight: bold;
	}
	lume-element3d:not(.sun) {
		background: rgba(255, 255, 0, 0.2);
	}
	img {
		width: 100%;
		height: 100%;
		display: block;
	}
</style>

<lume-scene id="scene">
	<lume-element3d id="container" size="78 78" align-point="0.5 0.5" mount-point="0.5 0.5">
		<lume-element3d
			class="sun"
			size-mode="proportional proportional"
			size="0.8 0.8"
			position="0 0 10"
			align-point="0.5 0.5"
			mount-point="0.5 0.5"
		>
			<img src="./sun.png" />
		</lume-element3d>
		<lume-element3d class="rotator A" size="60 60" align-point="1 1">
			<lume-element3d
				class="sun"
				size-mode="proportional proportional"
				size="0.8 0.8"
				position="0 0 10"
				align-point="0.5 0.5"
				mount-point="0.5 0.5"
			>
				<img src="./sun.png" />
			</lume-element3d>
			<lume-element3d class="rotator" size="45 45" align-point="1 1">
				<lume-element3d
					class="sun"
					size-mode="proportional proportional"
					size="0.8 0.8"
					position="0 0 10"
					align-point="0.5 0.5"
					mount-point="0.5 0.5"
				>
					<img src="./sun.png" />
				</lume-element3d>
				<lume-element3d class="rotator" size="28 28" align-point="1 1">
					<lume-element3d
						class="sun"
						size-mode="proportional proportional"
						size="0.8 0.8"
						position="0 0 10"
						align-point="0.5 0.5"
						mount-point="0.5 0.5"
					>
						<img src="./sun.png" />
					</lume-element3d>
				</lume-element3d>
			</lume-element3d>
		</lume-element3d>
		<lume-element3d class="rotator A" size="60 60" mount-point="1 1">
			<lume-element3d
				class="sun"
				size-mode="proportional proportional"
				size="0.8 0.8"
				position="0 0 10"
				align-point="0.5 0.5"
				mount-point="0.5 0.5"
			>
				<img src="./sun.png" />
			</lume-element3d>
			<lume-element3d class="rotator" size="45 45" mount-point="1 1">
				<lume-element3d
					class="sun"
					size-mode="proportional proportional"
					size="0.8 0.8"
					position="0 0 10"
					align-point="0.5 0.5"
					mount-point="0.5 0.5"
				>
					<img src="./sun.png" />
				</lume-element3d>
				<lume-element3d class="rotator" size="28 28" mount-point="1 1">
					<lume-element3d
						class="sun"
						size-mode="proportional proportional"
						size="0.8 0.8"
						position="0 0 10"
						align-point="0.5 0.5"
						mount-point="0.5 0.5"
					>
						<img src="./sun.png" />
					</lume-element3d>
				</lume-element3d>
			</lume-element3d>
		</lume-element3d>
		<lume-element3d class="rotator B" size="60 60" align-point="0 1" mount-point="1 0">
			<lume-element3d
				class="sun"
				size-mode="proportional proportional"
				size="0.8 0.8"
				position="0 0 10"
				align-point="0.5 0.5"
				mount-point="0.5 0.5"
			>
				<img src="./sun.png" />
			</lume-element3d>
			<lume-element3d class="rotator" size="45 45" align-point="0 1" mount-point="1 0">
				<lume-element3d
					class="sun"
					size-mode="proportional proportional"
					size="0.8 0.8"
					position="0 0 10"
					align-point="0.5 0.5"
					mount-point="0.5 0.5"
				>
					<img src="./sun.png" />
				</lume-element3d>
				<lume-element3d class="rotator" size="28 28" align-point="0 1" mount-point="1 0">
					<lume-element3d
						class="sun"
						size-mode="proportional proportional"
						size="0.8 0.8"
						position="0 0 10"
						align-point="0.5 0.5"
						mount-point="0.5 0.5"
					>
						<img src="./sun.png" />
					</lume-element3d>
				</lume-element3d>
			</lume-element3d>
		</lume-element3d>
		<lume-element3d class="B" size="60 60" align-point="1 0" mount-point="0 1">
			<lume-element3d
				class="sun"
				size-mode="proportional proportional"
				size="0.8 0.8"
				position="0 0 10"
				align-point="0.5 0.5"
				mount-point="0.5 0.5"
			>
				<img src="./sun.png" />
			</lume-element3d>
			<lume-element3d class="rotator" size="45 45" align-point="1 0" mount-point="0 1">
				<lume-element3d
					class="sun"
					size-mode="proportional proportional"
					size="0.8 0.8"
					position="0 0 10"
					align-point="0.5 0.5"
					mount-point="0.5 0.5"
				>
					<img src="./sun.png" />
				</lume-element3d>
				<lume-element3d class="rotator" size="28 28" align-point="1 0" mount-point="0 1">
					<lume-element3d
						class="sun"
						size-mode="proportional proportional"
						size="0.8 0.8"
						position="0 0 10"
						align-point="0.5 0.5"
						mount-point="0.5 0.5"
					>
						<img src="./sun.png" />
					</lume-element3d>
				</lume-element3d>
			</lume-element3d>
		</lume-element3d>
	</lume-element3d>
</lume-scene>

<script type="module">
	import 'lume'

	document.querySelectorAll('.A, .A .rotator').forEach(n => {
		n.rotation = (x, y, z, t) => [-65 * Math.sin(t * 0.0005), y, -65 * Math.sin(t * 0.0005)]
	})

	document.querySelectorAll('.B, .B .rotator').forEach(n => {
		n.rotation = (x, y, z, t) => [65 * Math.sin(t * 0.0005), 65 * Math.sin(t * 0.0005), z]
	})

	const rotationAmount = 35

	// Add some interaction so we can see the shine from the light!
	scene.addEventListener('pointermove', event => {
		container.rotation.y = (event.clientX / scene.calculatedSize.x) * (rotationAmount * 2) - rotationAmount
		container.rotation.x = -((event.clientY / scene.calculatedSize.y) * (rotationAmount * 2) - rotationAmount)
	})
</script>
